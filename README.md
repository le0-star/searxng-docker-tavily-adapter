# SearXNG Docker Tavily Adapter

**ะะตัะฟะปะฐัะฝะฐั ะทะฐะผะตะฝะฐ Tavily API ะฝะฐ ะฑะฐะทะต SearXNG** ๐

ะัะฟะพะปัะทัะนัะต SearXNG ั ัะพัะฝะพ ัะฐะบะธะผ ะถะต API ะบะฐะบ ั Tavily - ะฑะตะท ะพะณัะฐะฝะธัะตะฝะธะน, ะฑะตะท API ะบะปััะตะน, ะฟะพะปะฝะฐั ะฟัะธะฒะฐัะฝะพััั!

> ๐ฏ **ะะพัะพะฒัะน Docker Compose ััะตะบ** ั SearXNG + Tavily-ัะพะฒะผะตััะธะผัะผ API ะฐะดะฐะฟัะตัะพะผ

## ๐ ะัััััะน ััะฐัั

```bash
# 1. ะะปะพะฝะธัะพะฒะฐะฝะธะต
git clone git@github.com:vakovalskii/searxng-docker-tavily-adapter.git
# ะธะปะธ HTTPS: git clone https://github.com/vakovalskii/searxng-docker-tavily-adapter.git
cd searxng-docker-tavily-adapter

# 2. ะะฐัััะพะนะบะฐ ะบะพะฝัะธะณััะฐัะธะธ
cp config.example.yaml config.yaml
# ะะพะผะตะฝัะนัะต secret_key ะฒ config.yaml

# 3. ะะฐะฟััะบ
docker compose up -d

# 4. ะขะตัั
curl -X POST "http://localhost:8000/search" \
     -H "Content-Type: application/json" \
     -d '{"query": "ัะตะฝะฐ bitcoin", "max_results": 3}'
```

## ๐ก ะัะฟะพะปัะทะพะฒะฐะฝะธะต

### Drop-in ะทะฐะผะตะฝะฐ ะดะปั Tavily

```python
# ะฃััะฐะฝะพะฒะธัะต ะพัะธะณะธะฝะฐะปัะฝัะน Tavily ะบะปะธะตะฝั
pip install tavily-python

from tavily import TavilyClient

# ะัะพััะพ ะฟะพะผะตะฝัะนัะต base_url!
client = TavilyClient(
    api_key="ะฝะต_ะฒะฐะถะฝะพ",  # ะะณะฝะพัะธััะตััั
    base_url="http://localhost:8000"  # ะะฐั ะฐะดะฐะฟัะตั
)

# ะัะฟะพะปัะทัะนัะต ะบะฐะบ ะพะฑััะฝะพ
response = client.search(
    query="ัะตะฝะฐ bitcoin",
    max_results=5,
    include_raw_content=True
)
```

### ะัะพััะพะน API

```python
import requests

response = requests.post("http://localhost:8000/search", json={
    "query": "ััะพ ัะฐะบะพะต ะผะฐัะธะฝะฝะพะต ะพะฑััะตะฝะธะต",
    "max_results": 5,
    "include_raw_content": True
})

results = response.json()
```

## ๐ฆ ะงัะพ ะฒะฝัััะธ

- **SearXNG** (ะฟะพัั 8999) - ะผะพัะฝัะน ะผะตัะฐ-ะฟะพะธัะบะพะฒะธะบ
- **Tavily Adapter** (ะฟะพัั 8000) - HTTP API ัะพะฒะผะตััะธะผัะน ั Tavily
- **Redis** - ะบััะธัะพะฒะฐะฝะธะต ะดะปั SearXNG
- **ะะดะธะฝัะน ะบะพะฝัะธะณ** - `config.yaml` ะดะปั ะฒัะตั ัะตัะฒะธัะพะฒ

## ๐ฏ ะัะตะธะผััะตััะฒะฐ

| Tavily (ะพัะธะณะธะฝะฐะป) | SearXNG Adapter |
|-------------------|-----------------|
| ๐ฐ ะะปะฐัะฝัะน | โ ะะตัะฟะปะฐัะฝัะน |
| ๐ ะัะถะตะฝ API ะบะปัั | โ ะะตะท ะบะปััะตะน |
| ๐ ะะธะผะธัั ะทะฐะฟัะพัะพะฒ | โ ะะตะท ะปะธะผะธัะพะฒ |
| ๐ข ะะฝะตัะฝะธะน ัะตัะฒะธั | โ ะะพะบะฐะปัะฝะพะต ัะฐะทะฒะตัััะฒะฐะฝะธะต |
| โ ะะตะธะทะฒะตััะฝัะต ะธััะพัะฝะธะบะธ | โ ะะพะฝััะพะปะธััะตัะต ะดะฒะธะถะบะธ |

## ๐ API

### ะะฐะฟัะพั
```json
{
  "query": "ะฟะพะธัะบะพะฒัะน ะทะฐะฟัะพั",
  "max_results": 10,
  "include_raw_content": false
}
```

### ะัะฒะตั
```json
{
  "query": "ะฟะพะธัะบะพะฒัะน ะทะฐะฟัะพั",
  "results": [
    {
      "url": "https://example.com",
      "title": "ะะฐะณะพะปะพะฒะพะบ",
      "content": "ะัะฐัะบะพะต ะพะฟะธัะฐะฝะธะต...",
      "score": 0.9,
      "raw_content": "ะะพะปะฝัะน ัะตะบัั ัััะฐะฝะธัั..."
    }
  ],
  "response_time": 1.23,
  "request_id": "uuid"
}
```

## ๐ท๏ธ Raw Content - ะฒะตะฑ-ัะบัะฐะฟะธะฝะณ

### ะะฐะบ ัะฐะฑะพัะฐะตั `include_raw_content`

```python
# ะะตะท raw_content (ะฑััััะพ)
response = client.search(
    query="ะผะฐัะธะฝะฝะพะต ะพะฑััะตะฝะธะต",
    max_results=3
)
# content = ะบัะฐัะบะธะน snippet ะธะท ะฟะพะธัะบะพะฒะธะบะฐ
# raw_content = null

# ะก raw_content (ะผะตะดะปะตะฝะฝะตะต, ะฝะพ ะฑะพะปััะต ะดะฐะฝะฝัั)  
response = client.search(
    query="ะผะฐัะธะฝะฝะพะต ะพะฑััะตะฝะธะต", 
    max_results=3,
    include_raw_content=True
)
# content = ะบัะฐัะบะธะน snippet ะธะท ะฟะพะธัะบะพะฒะธะบะฐ
# raw_content = ะฟะพะปะฝัะน ัะตะบัั ัััะฐะฝะธัั (ะดะพ 2500 ัะธะผะฒะพะปะพะฒ)
```

### ะงัะพ ะฟัะพะธััะพะดะธั ะฟะพะด ะบะฐะฟะพัะพะผ

1. **ะะพะธัะบ ัะตัะตะท SearXNG** - ะฟะพะปััะฐะตะผ URL ะธ snippets
2. **ะะฐัะฐะปะปะตะปัะฝัะน ัะบัะฐะฟะธะฝะณ** - ะทะฐะณััะถะฐะตะผ HTML ะบะฐะถะดะพะน ัััะฐะฝะธัั
3. **ะัะธััะบะฐ ะบะพะฝัะตะฝัะฐ** - ัะดะฐะปัะตะผ script, style, nav, footer
4. **ะะทะฒะปะตัะตะฝะธะต ัะตะบััะฐ** - ะบะพะฝะฒะตััะธััะตะผ HTML ะฒ ัะธัััะน ัะตะบัั
5. **ะะฑัะตะทะบะฐ ะดะพ 2500 ัะธะผะฒะพะปะพะฒ** - ะพะฟัะธะผะฐะปัะฝัะน ัะฐะทะผะตั ะดะปั LLM

### ะะฐัััะพะนะบะฐ ัะบัะฐะฟะธะฝะณะฐ

ะ `config.yaml`:

```yaml
adapter:
  scraper:
    timeout: 10                    # ะขะฐะนะผะฐัั ะฝะฐ ัััะฐะฝะธัั (ัะตะบ)
    max_content_length: 2500       # ะะฐะบั. ัะฐะทะผะตั raw_content
    user_agent: "Mozilla/5.0..."   # User-Agent ะดะปั ะทะฐะฟัะพัะพะฒ
```

### ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั

| ะะตะถะธะผ | ะัะตะผั ะพัะฒะตัะฐ | ะะฑัะตะผ ะดะฐะฝะฝัั |
|-------|-------------|--------------|
| ะะตะท raw_content | ~1-2 ัะตะบ | ะขะพะปัะบะพ snippets |
| ะก raw_content | ~3-5 ัะตะบ | ะะพะปะฝัะน ัะตะบัั ัััะฐะฝะธั |

> ๐ก **ะกะพะฒะตั**: ะัะฟะพะปัะทัะนัะต `raw_content=True` ะบะพะณะดะฐ ะฝัะถะตะฝ ะฟะพะปะฝัะน ะบะพะฝัะตะบัั ะดะปั LLM, ะธ `False` ะดะปั ะฑััััะพะณะพ ะฟะพะธัะบะฐ.

## โ๏ธ ะะฐัััะพะนะบะฐ

ะะพะดัะพะฑะฝะฐั ะธะฝััััะบัะธั: [CONFIG_SETUP.md](CONFIG_SETUP.md)

## ๐๏ธ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   ะะฐั ะบะพะด       โโโโโถโ  Tavily Adapter  โโโโโถโ     SearXNG     โ
โ                 โ    โ   (ะฟะพัั 8000)    โ    โ   (ะฟะพัั 8999)   โ
โ requests.post() โ    โ                  โ    โ                 โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
                                โ                        โ
                                โผ                        โผ
                       โโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
                       โ  Web Scraping    โ    โ Google, Bing,   โ
                       โ  (raw_content)   โ    โ DuckDuckGo...   โ
                       โโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
```

## ๐ง ะะฐะทัะฐะฑะพัะบะฐ

```bash
# ะะพะบะฐะปัะฝะฐั ัะฐะทัะฐะฑะพัะบะฐ ะฐะดะฐะฟัะตัะฐ
cd simple_tavily_adapter
pip install -r requirements.txt
python main.py

# ะขะตััะธัะพะฒะฐะฝะธะต
python test_client.py
```

## ๐ ะะธัะตะฝะทะธั

MIT License - ะธัะฟะพะปัะทัะนัะต ะบะฐะบ ัะพัะธัะต! ๐